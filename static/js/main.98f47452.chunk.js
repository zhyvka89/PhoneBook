(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{12:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return j}));var r=n(3),a={user:{name:null,email:null},token:null,isLoggedIn:!1},c=Object(r.d)({name:"auth",initialState:a,reducers:{setCredentials:function(e,t){var n=t.payload,r=n.user,a=n.token;e.user=r,e.token=a,e.isLoggedIn=!0},removeCredentials:function(){return a},setCurrentUser:function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0}}});t.a=c.reducer;var i=c.actions,s=i.setCredentials,o=i.removeCredentials,u=i.setCurrentUser,d=function(e){return e.auth.user.name},l=function(e){return e.auth.token},j=function(e){return e.auth.isLoggedIn}},26:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(44),a=n(13),c=Object(r.a)({reducerPath:"usersApi",baseQuery:Object(a.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Users"],endpoints:function(e){return{getCurrentUser:e.query({query:function(){return"/users/current"},providesTags:["Users"]}),signupUser:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:{name:e.name,email:e.email,password:e.password},transformResponse:function(e){return e.data}}},invalidatesTags:["Users"]}),loginUser:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:{email:e.email,password:e.password}}},invalidatesTags:["Users"]}),logoutUser:e.mutation({query:function(){return{url:"users/logout",method:"POST"}},invalidatesTags:["Users"]})}}}),i=c.useGetCurrentUserQuery,s=c.useSignupUserMutation,o=c.useLoginUserMutation,u=c.useLogoutUserMutation},34:function(e,t,n){e.exports={link:"AuthNav_link__2BFiy",activeLink:"AuthNav_activeLink__17NnE AuthNav_link__2BFiy",authNav:"AuthNav_authNav__2rI7c"}},39:function(e,t,n){e.exports={link:"Navigation_link__vDiRg",activeLink:"Navigation_activeLink__LP4ul Navigation_link__vDiRg"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(44),a=n(13),c=Object(r.a)({reducerPath:"contactsApi",baseQuery:Object(a.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),i=c.useGetContactsQuery,s=c.useAddContactMutation,o=c.useDeleteContactMutation},53:function(e,t,n){e.exports={menu:"UserMenu_menu__367Z3",text:"UserMenu_text__2EEgl"}},61:function(e,t,n){e.exports={container:"Container_container__spsAE"}},66:function(e,t,n){e.exports={header:"AppBar_header__3LbVX"}},80:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),i=n.n(c),s=n(4),o=n(20),u=n(60),d=(n(80),n(7)),l=n(61),j=n.n(l),b=n(2),h=function(e){var t=e.children;return Object(b.jsx)("div",{className:j.a.container,children:t})},O=function(e){var t=e.children;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(h,{children:t})})},f=n(34),v=n.n(f);function m(){return Object(b.jsxs)("div",{className:v.a.authNav,children:[Object(b.jsx)(o.b,{to:"/register",className:v.a.link,activeClassName:v.a.activeLink,children:"Registration"}),Object(b.jsx)(o.b,{to:"/login",className:v.a.link,activeClassName:v.a.activeLink,children:"LogIn"})]})}var g=n(12),p=n(39),x=n.n(p),k=function(){var e=Object(s.e)(g.b);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(o.b,{to:"/",exact:!0,className:x.a.link,activeClassName:x.a.activeLink,children:"Home"}),e&&Object(b.jsx)(o.b,{to:"/contacts",className:x.a.link,activeClassName:x.a.activeLink,children:"Contacts"})]})},_=n(56),y=n(105),C=n(26),N=n(53),T=n.n(N);function L(){var e=Object(s.d)(),t=Object(s.e)(g.d),n=Object(C.c)(),r=Object(_.a)(n,1)[0];return Object(b.jsxs)("div",{className:T.a.menu,children:[Object(b.jsxs)("span",{className:T.a.text,children:["Welcome, ",t]}),Object(b.jsx)(y.a,{variant:"contained",color:"secondary",type:"button",size:"small",onClick:function(){r(),e(Object(g.e)())},children:"Log Out"})]})}var U=n(66),w=n.n(U);function P(){var e=Object(s.e)(g.b);return Object(b.jsxs)("header",{className:w.a.header,children:[Object(b.jsx)(k,{}),e?Object(b.jsx)(L,{}):Object(b.jsx)(m,{})]})}var A=n(32),S=n(47),q=["children","redirectTo"];function E(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=Object(S.a)(e,q),c=Object(s.e)(g.b);return Object(b.jsxs)(d.b,Object(A.a)(Object(A.a)({},a),{},{children:[c?t:Object(b.jsx)(d.a,{to:r}),t]}))}var z=["children","restricted","redirectTo"];function M(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,i=Object(S.a)(e,z),o=Object(s.e)(g.b)&&r;return Object(b.jsxs)(d.b,Object(A.a)(Object(A.a)({},i),{},{children:[o?Object(b.jsx)(d.a,{to:c}):t,t]}))}var I=n(109),B=n(110),D=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,165))})),Q=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,175))})),R=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,174))})),F=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(5)]).then(n.bind(null,172))})),H=Object(I.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function G(){var e=H(),t=Object(s.d)(),n=Object(s.e)(g.c),a=Object(C.a)(n).data;return console.log(a),Object(r.useEffect)((function(){n&&t(Object(g.g)(a))}),[t,n,a]),Object(b.jsxs)(O,{children:[Object(b.jsx)(P,{}),Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)("div",{className:e.root,children:Object(b.jsx)(B.a,{color:"secondary"})}),children:Object(b.jsxs)(d.d,{children:[Object(b.jsx)(M,{exact:!0,path:"/",children:Object(b.jsx)(D,{})}),Object(b.jsx)(M,{path:"/register",restricted:!0,children:Object(b.jsx)(Q,{})}),Object(b.jsx)(M,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(R,{})}),Object(b.jsx)(E,{path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(F,{})})]})})]})}var J,V=n(68),W=n(33),X=n(3),Z=n(23),K=n(67),Y=n.n(K),$=n(42),ee={key:"auth",storage:Y.a,whitelist:["token"]},te=Object(X.a)({reducer:(J={},Object(W.a)(J,$.a.reducerPath,$.a.reducer),Object(W.a)(J,C.e.reducerPath,C.e.reducer),Object(W.a)(J,"auth",Object(Z.g)(ee,g.a)),J),middleware:function(e){return[].concat(Object(V.a)(e({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[$.a.middleware,C.e.middleware])},devTools:!1}),ne=Object(Z.h)(te);n(86),n(87);i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(s.a,{store:te,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(u.a,{loading:null,persistor:ne,children:Object(b.jsx)(G,{})})})})}),document.getElementById("root"))}},[[88,2,3]]]);
//# sourceMappingURL=main.98f47452.chunk.js.map